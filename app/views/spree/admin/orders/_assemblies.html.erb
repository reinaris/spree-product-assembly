<% if order.line_items.assemblies.any? %>

  <div class="panel panel-default" id="add-line-item" data-hook="">
    <div class="panel-heading">
      <h1 class="panel-title">
        <%= Spree.t(:product_bundles) %>
      </h1>
    </div>
    <table class="product-bundles table table-bordered" data-hook="">
      <thead>
        <th colspan="2"><%= Spree.t(:item_description) %></th>
        <th width="15%"><%= Spree.t(:price) %></th>
        <th width="15%"><%= Spree.t(:quantity) %></th>
        <th width="15%"><%= Spree.t(:total) %></th>
        <th class="orders-actions actions" data-hook="admin_order_form_line_items_header_actions"></th>
      </thead>
      <% order.line_items.assemblies.each do |item| %>
        <tbody>
          <tr class="" data-item-quantity="<%= item.quantity %>">
            <td class="item-image" width="48"><%= mini_image(item.variant) %></td>
            <td class="item-name">
              <%= link_to item.product.try(:name), edit_admin_product_path(item.product) %><br/>
              <% if !item.variant.option_values.empty? %>
                <strong><%= variant_options(item.variant) %></strong><br />
              <% end %>
              <%= item.variant.sku %>
            </td>
            <td class="item-price align-center" width="50">
              <%= item.single_money.to_html %>
            </td>
            <td class="line-item-qty-show align-center">
              <%= item.quantity %>
            </td>
            <td class="line-item-qty-edit is-hidden">
              <%= number_field_tag :quantity, item.quantity, :min => 0, class: "line_item_quantity form-control", :size => 5 %>
            </td>
            <td class="item-total align-center">
              <%= item.display_amount.to_html %>
            </td>
            <td class="cart-item-delete actions text-center" data-hook="cart_item_delete" width="130">
              <% unless item.any_units_shipped? %>
                <% if can? :update, item %>
                  <%= link_to_with_icon 'arrow-left', Spree.t('actions.cancel'), "#", :class => 'cancel-line-item btn btn-default btn-sm', :data => {:action => 'cancel'}, :title => Spree.t('actions.cancel'), :style => 'display: none', :no_text => true %>
                  <%= link_to_with_icon 'save', Spree.t('actions.save'), "#", :class => 'save-line-item btn btn-success btn-sm', :no_text => true, :data => { :'line-item-id' => item.id, :action => 'save'}, :title => Spree.t('actions.save'), :style => 'display: none' %>
                  <%= link_to_with_icon 'edit', Spree.t('edit'), "#", :class => 'edit-line-item btn btn-primary btn-sm', :data => {:action => 'edit'}, :title => Spree.t('edit'), :no_text => true %>
                  <%= link_to_with_icon 'delete', Spree.t('delete'), "#", :class => 'delete-line-item btn btn-danger btn-sm', :data => { 'line-item-id' => item.id, :action => 'remove'}, :title => Spree.t('delete'), :no_text => true %>
                <% end %>
              <% end %>
            </td>
          </tr>
        </tbody>
      <% end %>
    </table>
  </div>

<% end %>
